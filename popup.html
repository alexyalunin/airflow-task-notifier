<!doctype html>
<html>
<head>
  <title>Airflow Task Notifier</title>
  <meta charset="UTF-8">

  <script src="js/services.js"></script>
  <script src="js/popup.js"></script>
  <script src="js/ga.js" data-no-firefox></script>
  <script src="test.js" data-no-firefox></script>

  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/custom.css" rel="stylesheet">
</head>
<body class="container-fluid">
<header>
  <h1 class="h4">
    Airflow Task Notifier
    <small><a id="optionsLink" href="#"><span class="glyphicon glyphicon-cog"></span></a></small>
  </h1>
</header>
<main>
  <div id="jobList" class="list-group"></div>

  <p class="help-block">No tasks. <br> To get task url: click on task -> click on Task Instance Details</p>

  <template id="jobItemTemplate">
    <div class="list-group-item">
      <div class="row">
        <div class="col-xs-2">
          <img data-jobstatusclass class="img-rounded avatar" alt="Jenkins" src="img/icon48.png">
        </div>
        <div class="col-xs-8">
          <div class="job-title no-margin inline-block">
            <h4>
              <span data-jobfield="name"><!--name--></span>
              <br>
              <a class="small" target="_blank" data-joburl data-jobfield="url"><!--url--></a>
            </h4>
          </div>
        </div>
        <div class="col-xs-2">
          <div class="pull-right">
            <button type="button" class="close" aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
            <a class="label label-danger" target="_blank" data-joburl data-joberror>
              <span class="glyphicon glyphicon-exclamation-sign"></span>
              Error
            </a>
            <p data-jobfield="status" data-jobstatusclass class="badge"><!--status--></p>
          </div>
        </div>
      </div>
      <ul data-id="jobs" class="list-unstyled">
        <!--View jobs-->
      </ul>
    </div>
  </template>

  <template id="jobSubItemTemplate">
    <li class="row">
      <div class="col-xs-8">
        <div class="job-title">
          <a target="_blank" data-joburl data-jobfield="name"><!--name--></a>
        </div>
      </div>
      <div class="col-xs-1">
        <span class="small" data-lastbuildtime><!--lastBuildTime--></span>
      </div>
      <div class="col-xs-3 text-center">
        <span data-jobfield="status" data-jobstatusclass class="badge"><!--status--></span>
      </div>
    </li>
  </template>
</main>
<footer>
  <form id="urlForm" name="urlForm">
    <div class="input-group">
      <label class="input-group-addon" for="url">Url</label>
      <input type="url" class="form-control" id="url" name="url"
             autofocus tabindex="1" required>
      <span class="input-group-btn">
          <button id="addButton" type="submit" class="btn btn-primary">
            <span class="glyphicon glyphicon-plus"></span>
          </button>
        </span>
    </div>
    <div id="errorMessage" class="help-block"></div>
    <br>
    <span style="word-break: break-all;">
       Example: <i>http://localhost:8080/task?dag_id=sleep_tasks&task_id=sleep_30&execution_date=2023-04-20T21%3A06%3A33.980263%2B00%3A00</i>
    </span>
  </form>
</footer>
</body>
</html>

